{{- if not (eq .Params.comments false) }}
<div class="giscus-container">
    <script src="https://giscus.app/client.js"
            data-repo="{{ .Site.Params.giscus.repo }}"
            data-repo-id="{{ .Site.Params.giscus.repoId }}"
            data-category="{{ .Site.Params.giscus.category }}"
            data-category-id="{{ .Site.Params.giscus.categoryId }}"
            data-mapping="{{ .Site.Params.giscus.mapping }}"
            data-strict="{{ .Site.Params.giscus.strict }}"
            data-reactions-enabled="{{ .Site.Params.giscus.reactionsEnabled }}"
            data-emit-metadata="{{ .Site.Params.giscus.emitMetadata }}"
            data-input-position="{{ .Site.Params.giscus.inputPosition }}"
            data-theme="{{ .Site.Params.giscus.theme | default "preferred_color_scheme" }}"
            data-lang="{{ .Site.Params.giscus.lang }}"
            data-loading="{{ .Site.Params.giscus.loading }}"
            crossorigin="anonymous"
            async>
    </script>
</div>

<style>
.giscus-container {
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 1px solid var(--border);
}

.giscus-frame {
    border-radius: 8px;
}

/* 响应式设计 */
@media (max-width: 768px) {
    .giscus-container {
        margin-top: 1rem;
        padding-top: 1rem;
    }
}

/* 深色模式适配 */
html[data-theme='dark'] .giscus-frame {
    background-color: var(--entry);
}
</style>

{{- end }}